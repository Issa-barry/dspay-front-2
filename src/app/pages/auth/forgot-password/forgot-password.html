<div class="px-8 min-h-screen flex justify-center items-center bg-surface-50 dark:bg-surface-950">
    <div class="border border-surface-200 dark:border-surface-700 bg-surface-0 dark:bg-surface-900 rounded-2xl py-12 px-6 md:px-16 z-10 w-full max-w-md">
        
        <!-- Succès - Email envoyé -->
        <div *ngIf="emailSent" class="text-center">
            <!-- Icon de succès -->
            <div class="flex justify-center mb-6">
                <div class="w-20 h-20 rounded-full bg-green-50 dark:bg-green-950/20 flex items-center justify-center">
                    <i class="pi pi-check-circle text-5xl text-green-500"></i>
                </div>
            </div>

            <div class="mb-6">
                <div class="text-surface-900 dark:text-surface-0 text-2xl font-bold mb-3">
                    Email envoyé !
                </div>
                <p class="text-surface-600 dark:text-surface-200 font-medium mb-2">
                    Nous avons envoyé un lien de réinitialisation à
                </p>
                <p class="text-primary font-bold">
                    {{ email }}
                </p>
            </div>

            <div class="bg-primary-50 dark:bg-primary-950/20 border border-primary-200 dark:border-primary-800 rounded-xl p-4 mb-6">
                <div class="flex items-start gap-3">
                    <i class="pi pi-info-circle text-primary mt-0.5 flex-shrink-0"></i>
                    <p class="text-sm text-surface-700 dark:text-surface-300 text-left">
                        Vérifiez votre boîte de réception et cliquez sur le lien pour réinitialiser votre mot de passe. Le lien expire dans 24 heures.
                    </p>
                </div>
            </div>

            <p class="text-sm text-muted-color">
                Redirection vers la connexion...
            </p>
        </div>

        <!-- Formulaire - Demande de réinitialisation -->
        <div *ngIf="!emailSent">
            <!-- Icon -->
            <div class="flex justify-center mb-6">
                <div class="w-20 h-20 rounded-full bg-primary-50 dark:bg-primary-950/20 flex items-center justify-center">
                    <i class="pi pi-key text-4xl text-primary"></i>
                </div>
            </div>

            <div class="mb-8 text-center">
                <div class="text-surface-900 dark:text-surface-0 text-2xl font-bold mb-3">
                    Mot de passe oublié ?
                </div>
                <span class="text-surface-600 dark:text-surface-200 font-medium">
                    Entrez votre email pour réinitialiser votre mot de passe
                </span>
            </div>

            <div class="flex flex-col">
                <!-- Email input -->
                <p-iconfield class="w-full mb-6">
                    <p-inputicon class="pi pi-envelope" />
                    <input
                        id="email"
                        type="email"
                        pInputText
                        [(ngModel)]="email"
                        class="w-full h-12 text-base"
                        placeholder="votre@email.com"
                        [class.p-invalid]="email && !isEmailValid()"
                    />
                </p-iconfield>

                <!-- Message d'erreur -->
                <div *ngIf="email && !isEmailValid()" class="text-red-500 text-sm mb-4 -mt-4">
                    Veuillez entrer une adresse email valide
                </div>

                <!-- Loading indicator -->
                <div *ngIf="isSending" class="text-center mb-6">
                    <div class="inline-flex items-center gap-2 text-primary">
                        <i class="pi pi-spin pi-spinner text-lg"></i>
                        <span class="text-sm font-medium">Envoi en cours...</span>
                    </div>
                </div>

                <!-- Action buttons -->
                <div class="flex flex-wrap gap-3 justify-between">
                    <button
                        pButton
                        pRipple
                        label="Envoyer"
                        class="flex-auto h-12"
                        [disabled]="!isEmailValid() || isSending"
                        [loading]="isSending"
                        (click)="submit()">
                    </button>
                </div>

                <!-- Retour à la connexion -->
                <div class="text-center mt-6">
                    <span class="text-sm text-muted-color">Vous vous souvenez de votre mot de passe? </span>
                    <a routerLink="/auth/login" class="text-sm text-primary font-semibold hover:underline">
                        Se connecter
                    </a>
                </div>
            </div>
        </div>

    </div>
</div>