<div class="send-form-card">
  <h2 class="title">Envoyer de l'argent</h2>

  <form (ngSubmit)="onSubmit()" #f="ngForm">
    <div class="form-group">
      <label class="form-label" for="eurAmount">Montant à envoyer ?</label>

      <!-- Montant en EUR -->
      <div class="currency-input">
        <img
          [src]="euFlag"
          alt="EU"
          class="flag-icon"
          (error)="onImageError($event, 'eu')"
        />

        <p-inputNumber
          inputId="eurAmount"
          [(ngModel)]="eurAmount"
          name="eurAmount"
          [min]="1"
          [minFractionDigits]="0"
          [maxFractionDigits]="2"
          [useGrouping]="false"
          placeholder="100"
          (onInput)="calculateGNF()"
        ></p-inputNumber>

        <span class="currency-code">€</span>
      </div>

      <label class="form-label" for="gnfAmount">Montant reçu</label>

      <!-- Montant en GNF -->
      <div class="currency-input">
        <img
          [src]="gnFlag"
          alt="Guinea"
          class="flag-icon"
          (error)="onImageError($event, 'gn')"
        />

        <p-inputNumber
      [(ngModel)]="gnfAmount"
      name="gnfAmount"
      mode="decimal"
      [minFractionDigits]="0"
      [maxFractionDigits]="0"
      thousandSeparator=" "
      decimalSeparator=""
      [useGrouping]="true"
      placeholder="950000"
      (onInput)="calculateEUR()"
    ></p-inputNumber>


        <span class="currency-code">GNF</span>
      </div>
    </div>

    <p-button
      type="submit"
      label="Envoyer"
      severity="contrast"
      icon="pi pi-arrow-right"
      iconPos="right"
      styleClass="send-button"
      [disabled]="exchangeRate <= 0 || !tauxEchangeId || eurAmount <= 0"
    ></p-button>

    <div class="exchange-rate">
      <h3>Taux d'échange</h3>

      <p *ngIf="exchangeRate > 0; else rateUnavailable">
        1 € = {{ exchangeRate | number:'1.0-0' }} GNF
      </p>

      <ng-template #rateUnavailable>
        <p class="p-error">Taux indisponible</p>
      </ng-template>
    </div>
  </form>
</div>
