<div class="send-detail-page">
  <!-- ✅ Header fixe mobile -->
  <div class="page-header">
    <button 
      (click)="retour()"
      class="back-button">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
    </button>
    <h1 class="page-title">Détails du transfert</h1>
    <!-- ✅ Statut dans le header mobile -->
    <span [class]="getStatutClass()" class="status-badge mobile-status">
      {{ getStatutText() }}
    </span>
  </div>

  <!-- ✅ Contenu scrollable -->
  <div class="page-content">
    
    <!-- Header avec statut -->
    <div class="transfer-header">
      <div class="header-info">
        <div>
          <p class="reference-label">Référence</p>
          <p class="reference-value">{{ transfer.reference }}</p>
        </div>
        <!-- ✅ Statut desktop seulement -->
        <span [class]="getStatutClass()" class="status-badge desktop-status">
          {{ getStatutText() }}
        </span>
      </div>
      
      <!-- Montant principal -->
      <div class="amount-section">
        <p class="amount-label">Montant envoyé</p>
        <p class="amount-value">{{ transfer.montant }} {{ transfer.devise }}</p>
      </div>
    </div>

    <!-- Corps -->
    <div class="detail-body">
      
      <!-- ✅ Conversion ALIGNÉE -->
      <div class="conversion-card">
        <div class="conversion-header">
          <div class="conversion-rate-row">
            <span class="rate-label">Taux de change</span>
            <span class="rate-value">1 EUR = {{ transfer.tauxChange }} GNF</span>
          </div>
        </div>
        
        <div class="conversion-result">
          <p class="result-amount">{{ transfer.montantConverti | number:'1.0-0' }} GNF</p>
          <p class="result-label">Montant reçu</p>
        </div>
      </div>

      <!-- Bénéficiaire -->
      <div class="section">
        <h3 class="section-title">
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
          Bénéficiaire
        </h3>
        <div class="info-card">
          <div class="info-row">
            <span class="info-label">Nom</span>
            <span class="info-value">{{ transfer.beneficiaire.prenom }} {{ transfer.beneficiaire.nom }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Téléphone</span>
            <span class="info-value">{{ transfer.beneficiaire.telephone }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Pays</span>
            <span class="info-value">{{ transfer.beneficiaire.pays }}</span>
          </div>
        </div>
      </div>

      <!-- Paiement -->
      <div class="section">
        <h3 class="section-title">
          <svg class="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
          </svg>
          Détails du paiement
        </h3>
        <div class="info-card">
          <div class="info-row">
            <span class="info-label">Méthode</span>
            <span class="info-value">{{ transfer.methodePaiement }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Date</span>
            <span class="info-value">{{ transfer.date | date:'dd/MM/yyyy à HH:mm' }}</span>
          </div>
          <div class="info-row">
            <span class="info-label">Montant</span>
            <span class="info-value">{{ transfer.montant }} EUR</span>
          </div>
          <div class="info-row">
            <span class="info-label">Frais</span>
            <span class="info-value">{{ transfer.frais }} EUR</span>
          </div>
          <div class="info-row total-row">
            <span class="info-label">Total payé</span>
            <span class="info-value total-value">{{ transfer.montantTotal }} EUR</span>
          </div>
        </div>
      </div>

      <!-- Actions -->
      <div class="actions-section">
        <!-- ✅ Bouton télécharger visible partout -->
        <button 
          (click)="telechargerRecu()"
          class="btn-primary">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
          </svg>
          Télécharger le reçu
        </button>
        
        <button 
          (click)="partagerTransfert()"
          class="btn-secondary">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />
          </svg>
          Partager
        </button>
      </div>

      <!-- Note d'aide -->
      <div class="help-note">
        <svg class="help-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        <div>
          <p class="help-title">Besoin d'aide ?</p>
          <p class="help-text">Contactez-nous au +224 xxx xx xx xx</p>
        </div>
      </div>

    </div>
  </div>
</div>